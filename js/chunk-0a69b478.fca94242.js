(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a69b478"],{"3e15":function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("form",{class:["form-group",{scrollable:"setting"===e.currentPage},{scroll:"setting"===e.currentPage}],attrs:{action:"#"},on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.account,expression:"user.account"}],class:{error:e.user.account.length>10},attrs:{type:"text",name:"account",id:"account",placeholder:"請輸入帳號",maxlength:"100",autocomplete:"username",required:""},domProps:{value:e.user.account},on:{input:function(t){t.target.composing||e.$set(e.user,"account",t.target.value)}}}),t("label",{attrs:{for:"account"}},[e._v("帳號")]),t("div",{staticClass:"input-hints"},[t("span",{staticClass:"error",style:{visibility:e.user.account.length>10?"visible":"hidden"}},[e._v(" 字數超出上限！ ")]),e.user.account.length?t("span",{class:{error:e.user.account.length>10}},[e._v(" "+e._s(e.user.account.length)+"/10 ")]):e._e()])]),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.name,expression:"user.name"}],class:{error:e.user.name.length>50},attrs:{type:"text",name:"name",id:"name",placeholder:"請輸入使用者名稱",maxlength:"100",autocomplete:"name",required:""},domProps:{value:e.user.name},on:{input:function(t){t.target.composing||e.$set(e.user,"name",t.target.value)}}}),t("label",{attrs:{for:"name"}},[e._v("名稱")]),t("div",{staticClass:"input-hints"},[t("span",{staticClass:"error",style:{visibility:e.user.name.length>50?"visible":"hidden"}},[e._v(" 字數超出上限！ ")]),e.user.name.length?t("span",{class:{error:e.user.name.length>50}},[e._v(" "+e._s(e.user.name.length)+"/50 ")]):e._e()])]),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.user.email,expression:"user.email",modifiers:{lazy:!0}}],attrs:{type:"email",name:"email",id:"email",placeholder:"請輸入Email",autocomplete:"email",required:""},domProps:{value:e.user.email},on:{change:[function(t){return e.$set(e.user,"email",t.target.value)},e.checkEmailFormat]}}),t("label",{attrs:{for:"email"}},[e._v("Email")])]),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.user.password,expression:"user.password",modifiers:{lazy:!0}}],attrs:{type:"password",name:"password",id:"password",placeholder:"請設定密碼",maxlength:"100",autocomplete:"new-password",required:"signup"===e.currentPage},domProps:{value:e.user.password},on:{change:function(t){return e.$set(e.user,"password",t.target.value)}}}),t("label",{attrs:{for:"password"}},[e._v("密碼")])]),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.user.checkPassword,expression:"user.checkPassword",modifiers:{lazy:!0}}],attrs:{type:"password",name:"password",id:"passwordCheck",placeholder:"請再次設定密碼",maxlength:"100",required:"signup"===e.currentPage},domProps:{value:e.user.checkPassword},on:{change:function(t){return e.$set(e.user,"checkPassword",t.target.value)}}}),t("label",{attrs:{for:"checkPassword"}},[e._v("密碼確認")])]),"setting"===e.currentPage?t("button",{staticClass:"btn-setting",attrs:{type:"submit",disabled:e.isProcessing}},[e._v(" "+e._s(e.isProcessing?"處理中":"儲存")+" ")]):e._e(),"signup"===e.currentPage?t("button",{staticClass:"btn-primary",attrs:{type:"submit",disabled:e.isProcessing}},[e._v(" "+e._s(e.isProcessing?"處理中":"註冊")+" ")]):e._e(),"signup"===e.currentPage?t("router-link",{staticClass:"btn-link",attrs:{to:{name:"sign-in"}}},[e._v(" 取消 ")]):e._e()],1)},a=[],r=s("2fa3"),n={props:{currentPage:{type:String,required:!0},initialUser:{type:Object,default:()=>({account:"",name:"",email:"",password:"",checkPassword:""})},isProcessing:{type:Boolean,default:!1}},data(){return{user:{account:"",name:"",email:"",password:"",checkPassword:""},validResult:!1}},methods:{fetchInitialUser(){this.user={...this.user,...this.initialUser}},checkEmailFormat(){const e=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;return e.test(this.user.email)},handleSubmit(e){if("signup"===this.currentPage){if(!this.user.account||!this.user.name||!this.user.email||!this.user.password||!this.user.checkPassword)return r["a"].fire({icon:"warning",title:"請確認已填寫所有欄位"}),this.validResult=!1,void this.$emit("after-submit",{validResult:this.validResult,user:{}});if(this.user.account.trim().length>10||this.user.name.trim().length>50)return r["a"].fire({icon:"warning",title:"字數超出上限，請重新填寫"}),this.validResult=!1,void this.$emit("after-submit",{validResult:this.validResult,user:{}});if(this.user.password!==this.user.checkPassword)return r["a"].fire({icon:"warning",title:"兩次輸入的密碼不同"}),this.user.checkPassword="",this.validResult=!1,void this.$emit("after-submit",{validResult:this.validResult,user:{}});this.validResult=!0,this.$emit("after-submit",{validResult:this.validResult,user:this.user})}if("setting"===this.currentPage){if(!this.user.account||!this.user.name||!this.user.email)return r["a"].fire({icon:"warning",title:"請確認已填寫所有欄位"}),this.validResult=!1,void this.$emit("after-submit",{validResult:this.validResult,user:{}});if(this.user.account.trim().length>10||this.user.name.trim().length>50)return r["a"].fire({icon:"warning",title:"字數超出上限，請重新填寫"}),this.validResult=!1,void this.$emit("after-submit",{validResult:this.validResult,user:{}});if(this.user.password!==this.user.checkPassword)return r["a"].fire({icon:"warning",title:"兩次輸入的密碼不同"}),this.user.checkPassword="",this.validResult=!1,void this.$emit("after-submit",{validResult:this.validResult,user:{}});this.validResult=!0,this.$emit("after-submit",{validResult:this.validResult,user:this.user})}}},created(){this.fetchInitialUser()}},u=n,l=(s("4115"),s("2877")),c=Object(l["a"])(u,i,a,!1,null,"2f9a66a9",null);t["a"]=c.exports},4115:function(e,t,s){"use strict";s("ca3f")},"99c1":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container-twitter"},[t("NavBar"),t("section",{staticClass:"center-section"},[e._m(0),t("FormAccount",{staticClass:"pt-4 px-4",attrs:{"current-page":"setting","initial-user":e.initialUser,"is-processing":e.isProcessing},on:{"after-submit":e.handleAfterSubmit}})],1)],1)},a=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"title-container"},[t("header",{staticClass:"header"},[t("h4",{staticClass:"title"},[e._v("帳戶設定")])])])}],r=(s("d9e2"),s("d000")),n=s("3e15"),u=s("2f62"),l=s("4cce"),c=s("2fa3"),o={components:{NavBar:r["a"],FormAccount:n["a"]},data(){return{initialUser:{account:"",name:"",email:""},isProcessing:!1}},methods:{fetchUser(){const{account:e,name:t,email:s}=this.currentUser;this.initialUser={account:e,name:t,email:s}},async handleAfterSubmit(e){try{const{validResult:t,user:s}=e;if(!t)return;this.isProcessing=!0;const{data:i}=await l["a"].updateAccount({userId:this.currentUser.id,...s});if("success"!==i.status)throw new Error(i.message);this.isProcessing=!1,c["a"].fire({icon:"success",title:"編輯成功"}),this.$router.go(0)}catch(t){this.isProcessing=!1;const e=t.response.data.message;c["a"].fire({icon:"warning",title:e})}}},computed:{...Object(u["c"])(["currentUser"])},created(){this.fetchUser()}},d=o,m=s("2877"),h=Object(m["a"])(d,i,a,!1,null,null,null);t["default"]=h.exports},ca3f:function(e,t,s){}}]);
//# sourceMappingURL=chunk-0a69b478.fca94242.js.map