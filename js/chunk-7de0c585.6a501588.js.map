{"version":3,"sources":["webpack:///./src/assets/icon/add-notify.svg","webpack:///./src/views/UserProfile.vue","webpack:///./src/components/ModalEditProfile.vue","webpack:///src/components/ModalEditProfile.vue","webpack:///./src/components/ModalEditProfile.vue?6634","webpack:///./src/components/ModalEditProfile.vue?5cae","webpack:///src/views/UserProfile.vue","webpack:///./src/views/UserProfile.vue?9911","webpack:///./src/views/UserProfile.vue?9431","webpack:///./src/assets/icon/tweet-back.svg","webpack:///./src/assets/icon/direct-message.svg","webpack:///./src/components/ModalEditProfile.vue?97cb","webpack:///./src/views/UserProfile.vue?3998"],"names":["module","exports","render","_vm","this","_c","_self","staticClass","attrs","require","on","$event","$router","back","_v","_s","profile","name","tweetsCounts","isLoading","_f","avatar","cover","currentUser","id","stopPropagation","preventDefault","isEditing","isFollowing","deleteFollowing","addFollowing","account","introduction","followingsCounts","params","followersCounts","directives","rawName","value","expression","handleModalClose","staticRenderFns","handleSubmit","apply","arguments","handleCancel","isProcessing","user","_e","handleAvatarFileChange","handleBannerFileCancel","handleBannerFileChange","domProps","target","composing","$set","style","visibility","length","class","error","mixins","props","initialProfile","type","required","data","nameCached","introCached","avatarCached","coverCached","methods","fetchUserProfile","files","Toast","icon","title","userId","created","watch","component","email","components","NavBar","TweetPopularUser","ModalEditProfile","Spinner","beforeRouteUpdate","next","computed","updatePageNow"],"mappings":"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AgD,gBAEAxB,kBAGAyB,SACAC,oBACA,SAAAhD,OAAAP,eAAAe,SAAAX,QAAAC,GAAA,EACA,cACA,UACAE,KACAP,OACAkD,aACAnC,eACAoC,cACA/C,SACAgD,eACA/C,QACAgD,gBAGArB,0BACA,YAAAwB,GAAA,SAEA,gBACA,yBACA,qBACAC,aACAC,aACAC,4BAEA,wBACA,CACA,yCACA,qBAGAzB,0BACA,YAAAsB,GAAA,SAEA,gBACA,wBACA,qBACAC,aACAC,aACAC,4BAEA,uBACA,CACA,yCACA,oBAGA1B,yBACA,cACA,UACA5B,8BAGA,sBACA,IACA,mBAKA,YAJAoD,aACAC,aACAC,0BAIA,oCACA,yCAKA,YAJAF,aACAC,aACAC,uBAIA,0CACA,gDACA,2CACA,wCAOA,OANAF,aACAC,eACAC,oBAEA,0BACA,oBAGA,qBACA,iBACA,mBACA,KAAAV,SAAA,sBACAW,oBACAX,SAEA,wBACA,2BAEAQ,aACAC,eACAC,oBAEA,qBAGA,mBACA,SACA,qBACAF,aACAC,aACAC,4BAIA/B,eACA,cACA,UACA5B,0BACAe,mCACAX,8BACAC,6BAEA,sBAGAwD,UACA,4CAEAC,OACAhB,kBACA,4BC9O0V,I,wBCQtViB,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,EAAAA,E,4CCwNA,GACf/D,mBACA4C,gBACAK,OACA,OACAlD,SACAQ,MACAO,WACAd,QACAgE,SACAjD,gBACAX,YACAC,WACAJ,eACAe,mBACAE,kBACAP,gBAEAD,aACAR,eAGA+D,YACAC,cACAC,wBACAC,mBACAC,gBAEAf,YACA,+BACA,0BACA,IAEA,WAAAL,SAAA,mBAAAW,WACA,wBACA,2BAGA,sBACA,2BACA,qBAGA,iBACA,aACA7C,uCACA,0BACA,IAEA,kBACA,SACA,kBACA0C,aACAC,aACAC,4BAIA,sBACA,IACA,WAAAV,SAAA,kBAAA1C,OACA,wBACA,2BAEA,4BACA,gCACAkD,aACAC,eACAC,eAEA,oBACA,SACAF,aACAC,aACAC,uBAIA,yBACA,IACA,WAAAV,SAAA,qBAAA1C,OACA,wBACA,2BAEA,4BACA,gCACAkD,aACAC,eACAC,gBAEA,oBACA,SACAF,aACAC,aACAC,yBAIApC,mBACA,oBAGAsC,UACA,MAAAtD,MAAA,mBACA,0BAEA+D,yBACA,SAAA/D,GAAA,SACA,yBACAgE,KAEAC,aACA,mCACA,gBAAAC,iCAEAX,OACAW,gBACA,uBACA,MAAAlE,MAAA,mBACA,6BClWqV,ICQjV,G,UAAY,eACd,EACAtB,EACAuC,GACA,EACA,KACA,WACA,OAIa,e,gCCnBfzC,EAAOC,QAAU,IAA0B,+B,qBCA3CD,EAAOC,QAAU,IAA0B,mC,kCCA3C,W,kCCAA,W","file":"js/chunk-7de0c585.6a501588.js","sourcesContent":["module.exports = __webpack_public_path__ + \"img/add-notify.843fff15.svg\";","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container-twitter\"},[_c('NavBar'),_c('section',{staticClass:\"center-section\"},[_c('header',{staticClass:\"title\"},[_c('img',{staticClass:\"icon-back\",attrs:{\"src\":require(\"../assets/icon/tweet-back.svg\"),\"alt\":\"\"},on:{\"click\":function($event){return _vm.$router.back()}}}),_c('div',{staticClass:\"user-title\"},[_c('h5',{},[_vm._v(_vm._s(_vm.profile.name))]),_c('p',{staticClass:\"text-muted\"},[_vm._v(_vm._s(_vm.profile.tweetsCounts)+\" 推文\")])])]),(_vm.isLoading)?_c('Spinner'):_c('main',{staticClass:\"center-container scrollbar\"},[_c('div',{staticClass:\"profile-img\"},[_c('div',{staticClass:\"avatar-thumbnail\"},[_c('img',{staticClass:\"avatarImg\",attrs:{\"src\":_vm._f(\"emptyImage\")(_vm.profile.avatar),\"alt\":\"avatar-image\"}})]),_c('img',{staticClass:\"d-block banner-img-thumbnail\",attrs:{\"src\":_vm._f(\"emptyCover\")(_vm.profile.cover),\"alt\":\"banner-image\"}})]),_c('div',{staticClass:\"profile-detail px-4\"},[_c('div',{staticClass:\"button-group my-3\"},[(_vm.currentUser.id === _vm.profile.id)?_c('button',{staticClass:\"btn-edit\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();_vm.isEditing = true}}},[_vm._v(\" 編輯個人資料 \")]):_c('div',{staticClass:\"btn-follow\"},[_c('button',{staticClass:\"btn-direct-message p-2\"},[_c('img',{attrs:{\"src\":require(\"../assets/icon/direct-message.svg\"),\"alt\":\"direct-message\"}})]),_c('button',{staticClass:\"btn-notification\"},[_c('img',{attrs:{\"src\":require(\"../assets/icon/add-notify.svg\"),\"alt\":\"get-notify\"}})]),(!_vm.profile.isFollowing)?_c('button',{staticClass:\"btn toggle-follow\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.addFollowing(_vm.profile.id)}}},[_vm._v(\" 跟隨 \")]):_c('button',{staticClass:\"btn toggle-follow following\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.deleteFollowing(_vm.profile.id)}}},[_vm._v(\" 正在跟隨 \")])])]),_c('h5',[_vm._v(_vm._s(_vm.profile.name))]),_c('span',{staticClass:\"text-muted mb-1\"},[_vm._v(\"@\"+_vm._s(_vm.profile.account))]),_c('p',[_vm._v(_vm._s(_vm.profile.introduction))]),_c('div',{staticClass:\"follow-status\"},[_c('span',{staticClass:\"following-text\"},[_vm._v(_vm._s(_vm.profile.followingsCounts)+\"個 \"),_c('router-link',{attrs:{\"to\":{ name: 'user-following', params: { id: _vm.profile.id } }}},[_c('span',{staticClass:\"text-light\"},[_vm._v(\"跟隨中\")])])],1),_c('span',{staticClass:\"follower\"},[_vm._v(_vm._s(_vm.profile.followersCounts)+\"位 \"),_c('router-link',{attrs:{\"to\":{ name: 'user-follower', params: { id: _vm.profile.id } }}},[_c('span',{staticClass:\"text-light\"},[_vm._v(\"跟隨者\")])])],1)])]),_c('router-view')],1),_c('ModalEditProfile',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isEditing),expression:\"isEditing\"}],attrs:{\"initial-profile\":_vm.profile},on:{\"close\":_vm.handleModalClose}})],1),_c('TweetPopularUser')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('transition',{attrs:{\"name\":\"modal\"}},[_c('div',{staticClass:\"modal-mask\"},[_c('div',{staticClass:\"modal-wrapper\"},[_c('div',{staticClass:\"modal-container\"},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.handleSubmit.apply(null, arguments)}}},[_c('div',{staticClass:\"modal-header\"},[_c('h5',{staticClass:\"modal-header-title\",attrs:{\"name\":\"modal-header\"}},[_vm._v(\"編輯個人資料\")]),_c('button',{staticClass:\"modal-close-button\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.handleCancel.apply(null, arguments)}}},[_c('img',{staticClass:\"btn-close\",attrs:{\"src\":require(\"./../assets/icon/modal-cancel.svg\"),\"alt\":\"\"}})]),_c('button',{staticClass:\"btn-save\",attrs:{\"type\":\"submit\",\"disabled\":_vm.isProcessing}},[_vm._v(\" \"+_vm._s(_vm.isProcessing ? '儲存中' : '儲存')+\" \")])]),_c('div',{staticClass:\"modal-body scrollbar\"},[_c('div',{staticClass:\"container-image\"},[_c('div',{staticClass:\"avatar-container\"},[_c('div',{staticClass:\"avatar-image-container\"},[_c('label',{staticClass:\"avatar-image-label\",attrs:{\"for\":\"avatar-image\"}}),_c('div',{staticClass:\"avatar-thumbnail\"},[_c('img',{staticClass:\"avatarImg\",attrs:{\"src\":_vm._f(\"emptyImage\")(_vm.user.avatar),\"alt\":\"avatar-image\"}})]),(!_vm.user.avatar)?_c('div',{staticClass:\"bg-mask avatar-mask\"}):_vm._e()]),_c('input',{staticClass:\"form-control-file\",attrs:{\"id\":\"avatar-image\",\"type\":\"file\",\"name\":\"avatar\",\"accept\":\"image/*\"},on:{\"change\":_vm.handleAvatarFileChange}})]),_c('div',{staticClass:\"banner\"},[_c('div',{staticClass:\"banner-container\"},[_c('div',{staticClass:\"banner-image-container\"},[_c('div',{staticClass:\"banner-btn-control\"},[_c('label',{staticClass:\"banner-image-label pe-5\",attrs:{\"for\":\"image\"}}),_c('button',{staticClass:\"modal-close-button\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.handleBannerFileCancel.apply(null, arguments)}}},[_c('img',{staticClass:\"btn-close banner-cancel\",attrs:{\"src\":require(\"./../assets/icon/modal-cancel.svg\"),\"alt\":\"close-button\"}})])]),_c('img',{staticClass:\"d-block banner-img-thumbnail\",attrs:{\"src\":_vm._f(\"emptyCover\")(_vm.user.cover),\"alt\":\"banner-image\"}}),(!_vm.user.cover)?_c('div',{staticClass:\"bg-mask banner-mask\"}):_vm._e()]),_c('input',{staticClass:\"form-control-file\",attrs:{\"id\":\"image\",\"type\":\"file\",\"name\":\"cover\",\"accept\":\"image/*\"},on:{\"change\":_vm.handleBannerFileChange}})])])]),_c('div',{staticClass:\"modal-content\"},[_c('div',{staticClass:\"input-group\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.name),expression:\"user.name\"}],attrs:{\"type\":\"text\",\"name\":\"name\",\"id\":\"name\",\"maxlength\":\"100\",\"required\":\"\"},domProps:{\"value\":(_vm.user.name)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.user, \"name\", $event.target.value)}}}),_c('label',{attrs:{\"for\":\"name\"}},[_vm._v(\"名稱\")]),_c('div',{staticClass:\"input-hints\"},[_c('span',{staticClass:\"error\",style:({ visibility: _vm.user.name.length > 50 ? 'visible' : 'hidden' })},[_vm._v(\" 字數超出上限！ \")]),(_vm.user.name.length)?_c('span',{class:{ error: _vm.user.name.length > 50 }},[_vm._v(\" \"+_vm._s(_vm.user.name.length)+\"/50\")]):_vm._e()])]),_c('div',{staticClass:\"input-group\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.introduction),expression:\"user.introduction\"}],staticClass:\"self-intro\",attrs:{\"name\":\"introduction\",\"id\":\"introduction\",\"cols\":\"30\",\"rows\":\"10\",\"placeholder\":\"讓社群更認識你\"},domProps:{\"value\":(_vm.user.introduction)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.user, \"introduction\", $event.target.value)}}}),_c('label',{attrs:{\"for\":\"introduction\"}},[_vm._v(\"自我介紹\")]),_c('div',{staticClass:\"input-hints\"},[_c('span',{staticClass:\"error\",style:({ visibility: _vm.user.introduction.length > 160 ? 'visible' : 'hidden' })},[_vm._v(\" 字數超出上限！ \")]),(_vm.user.introduction.length)?_c('span',{class:{ error: _vm.user.introduction.length > 160 }},[_vm._v(\" \"+_vm._s(_vm.user.introduction.length)+\"/160 \")]):_vm._e()])])])])])])])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <transition name=\"modal\">\r\n    <div class=\"modal-mask\">\r\n      <div class=\"modal-wrapper\">\r\n        <div class=\"modal-container\">\r\n          <form @submit.prevent.stop=\"handleSubmit\">\r\n            <div class=\"modal-header\">\r\n              <h5 name=\"modal-header\" class=\"modal-header-title\">編輯個人資料</h5>\r\n              <button class=\"modal-close-button\" @click.stop.prevent=\"handleCancel\">\r\n                <img class=\"btn-close\" src=\"./../assets/icon/modal-cancel.svg\" alt=\"\" />\r\n              </button>\r\n              <button type=\"submit\" class=\"btn-save\" :disabled=\"isProcessing\">\r\n                {{ isProcessing ? '儲存中' : '儲存' }}\r\n              </button>\r\n            </div>\r\n\r\n            <div class=\"modal-body scrollbar\">\r\n              <div class=\"container-image\">\r\n                <div class=\"avatar-container\">\r\n                  <div class=\"avatar-image-container\">\r\n                    <label for=\"avatar-image\" class=\"avatar-image-label\"></label>\r\n                    <div class=\"avatar-thumbnail\">\r\n                      <img class=\"avatarImg\" :src=\"user.avatar | emptyImage\" alt=\"avatar-image\">\r\n                    </div>\r\n                    <div class=\"bg-mask avatar-mask\" v-if=\"!user.avatar\"></div>\r\n                  </div>\r\n                  <input id=\"avatar-image\" type=\"file\" name=\"avatar\" accept=\"image/*\" class=\"form-control-file\"\r\n                    @change=\"handleAvatarFileChange\">\r\n                </div>\r\n                <div class=\"banner\">\r\n                  <div class=\"banner-container\">\r\n                    <div class=\"banner-image-container\">\r\n                      <div class=\"banner-btn-control\">\r\n                        <label for=\"image\" class=\"banner-image-label pe-5\"></label>\r\n                        <button class=\"modal-close-button\" @click.stop.prevent=\"handleBannerFileCancel\">\r\n                          <img class=\"btn-close banner-cancel\" src=\"./../assets/icon/modal-cancel.svg\"\r\n                            alt=\"close-button\" />\r\n                        </button>\r\n                      </div>\r\n                      <img class=\"d-block banner-img-thumbnail\" :src=\"user.cover | emptyCover\" alt=\"banner-image\">\r\n                      <div class=\"bg-mask banner-mask\" v-if=\"!user.cover\"></div>\r\n                    </div>\r\n                    <input id=\"image\" type=\"file\" name=\"cover\" accept=\"image/*\" class=\"form-control-file\"\r\n                      @change=\"handleBannerFileChange\">\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"modal-content\">\r\n                <div class=\"input-group\">\r\n                  <input type=\"text\" name=\"name\" id=\"name\" maxlength=\"100\" v-model=\"user.name\" required>\r\n                  <label for=\"name\">名稱</label>\r\n\r\n                  <div class=\"input-hints\">\r\n                    <span class=\"error\" :style=\"{ visibility: user.name.length > 50 ? 'visible' : 'hidden' }\">\r\n                      字數超出上限！\r\n                    </span>\r\n                    <span :class=\"{ error: user.name.length > 50 }\" v-if=\"user.name.length\">\r\n                      {{ user.name.length }}/50</span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class=\"input-group\">\r\n                  <textarea name=\"introduction\" id=\"introduction\" cols=\"30\" rows=\"10\" class=\"self-intro\"\r\n                    v-model=\"user.introduction\" placeholder=\"讓社群更認識你\"></textarea>\r\n                  <label for=\"introduction\">自我介紹</label>\r\n\r\n                  <div class=\"input-hints\">\r\n                    <span class=\"error\" :style=\"{ visibility: user.introduction.length > 160 ? 'visible' : 'hidden' }\">\r\n                      字數超出上限！\r\n                    </span>\r\n                    <span :class=\"{ error: user.introduction.length > 160 }\" v-if=\"user.introduction.length\">\r\n                      {{ user.introduction.length }}/160\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </transition>\r\n</template>\r\n\r\n<script>\r\nimport usersAPI from '../apis/users'\r\nimport { Toast } from '../utils/helpers'\r\nimport { emptyImageFilter } from '../utils/mixin'\r\n\r\nexport default {\r\n  mixins: [emptyImageFilter],\r\n  props: {\r\n    initialProfile: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      user: {\r\n        id: -1,\r\n        name: '',\r\n        nameCached: '',\r\n        introduction: '',\r\n        introCached: '',\r\n        avatar: null,\r\n        avatarCached: '',\r\n        cover: null,\r\n        coverCached: ''\r\n      },\r\n      isProcessing: false\r\n    }\r\n  },\r\n  methods: {\r\n    fetchUserProfile (profile) {\r\n      const { id, name, introduction, avatar, cover } = profile\r\n      this.user = {\r\n        ...this.user,\r\n        id,\r\n        name,\r\n        nameCached: name,\r\n        introduction,\r\n        introCached: introduction,\r\n        avatar,\r\n        avatarCached: avatar,\r\n        cover,\r\n        coverCached: cover\r\n      }\r\n    },\r\n    handleAvatarFileChange (e) {\r\n      const { files } = e.target\r\n\r\n      if (files.length === 0) {\r\n        this.user.avatar = ''\r\n      } else if (files[0].size > 8388608) {\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: '超過檔案大小上限8MB，請重新上傳'\r\n        })\r\n        this.user.avatar = ''\r\n      } else {\r\n        const imageURL = window.URL.createObjectURL(files[0])\r\n        this.user.avatar = imageURL\r\n      }\r\n    },\r\n    handleBannerFileChange (e) {\r\n      const { files } = e.target\r\n\r\n      if (files.length === 0) {\r\n        this.user.cover = ''\r\n      } else if (files[0].size > 8388608) {\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: '超過檔案大小上限8MB，請重新上傳'\r\n        })\r\n        this.user.cover = ''\r\n      } else {\r\n        const imageURL = window.URL.createObjectURL(files[0])\r\n        this.user.cover = imageURL\r\n      }\r\n    },\r\n    handleBannerFileCancel () {\r\n      this.user = {\r\n        ...this.user,\r\n        cover: this.user.coverCached\r\n      }\r\n    },\r\n    async handleSubmit (e) {\r\n      try {\r\n        if (!this.user.name) {\r\n          Toast.fire({\r\n            icon: 'error',\r\n            title: '使用者名稱為必填，請確認已填寫'\r\n          })\r\n          return\r\n        }\r\n        if (this.user.name.trim().length > 50 ||\r\n          this.user.introduction.trim().length > 160) {\r\n          Toast.fire({\r\n            icon: 'error',\r\n            title: '超過字數上限，請重新修改'\r\n          })\r\n          return\r\n        }\r\n        if (this.user.name === this.user.nameCached &&\r\n          this.user.introduction === this.user.introCached &&\r\n          this.user.avatar === this.user.avatarCached &&\r\n          this.user.cover === this.user.coverCached) {\r\n          Toast.fire({\r\n            icon: 'success',\r\n            title: '成功更新使用者資料'\r\n          })\r\n          this.isProcessing = false\r\n          this.$emit('close')\r\n          return\r\n        }\r\n        this.isProcessing = true\r\n        const form = e.target\r\n        const formData = new FormData(form)\r\n        const { data } = await usersAPI.updateProfile({\r\n          userId: this.user.id,\r\n          data: formData\r\n        })\r\n        if (data.status !== 'success') {\r\n          throw new Error(data.message)\r\n        }\r\n        Toast.fire({\r\n          icon: 'success',\r\n          title: '成功更新使用者資料'\r\n        })\r\n        this.isProcessing = false\r\n\r\n        // current page reload\r\n        this.$router.go(0)\r\n      } catch (error) {\r\n        this.isProcessing = false\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: '無法編輯使用者資料，請稍後再試'\r\n        })\r\n      }\r\n    },\r\n    handleCancel () {\r\n      this.user = {\r\n        ...this.user,\r\n        name: this.user.nameCached,\r\n        introduction: this.user.introCached,\r\n        avatar: this.user.avatarCached,\r\n        cover: this.user.coverCached\r\n      }\r\n      this.$emit('close')\r\n    }\r\n  },\r\n  created () {\r\n    this.fetchUserProfile(this.initialProfile)\r\n  },\r\n  watch: {\r\n    initialProfile (newValue) {\r\n      this.fetchUserProfile(newValue)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n// modal\r\n.modal-mask {\r\n  position: absolute;\r\n  z-index: 1;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100vh;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  transition: opacity 0.3s ease;\r\n}\r\n\r\n.modal-wrapper {\r\n  position: absolute;\r\n  top: 5%;\r\n  left: 50%;\r\n  transform: translate(-50%, 0%);\r\n}\r\n\r\n.modal-container {\r\n  width: 600px;\r\n  height: 630px;\r\n  left: 334px;\r\n  margin: 0px auto;\r\n  background-color: #fff;\r\n  border-radius: 14px;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.modal-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 1rem;\r\n  border-bottom: 1px solid var(--border);\r\n}\r\n\r\n.modal-header-title {\r\n  position: absolute;\r\n  left: 4rem;\r\n}\r\n\r\n.modal-body {\r\n  height: 100vh;\r\n  overflow-y: overlay;\r\n}\r\n\r\n.container-image {\r\n  position: relative;\r\n}\r\n\r\n.modal-content {\r\n  // height: 100vh;\r\n  padding: 5rem 1rem 1rem 1rem;\r\n}\r\n\r\n// vue modal default\r\n.modal-enter {\r\n  opacity: 0;\r\n}\r\n\r\n.modal-leave-active {\r\n  opacity: 0;\r\n}\r\n\r\n.modal-enter .modal-container,\r\n.modal-leave-active .modal-container {\r\n  -webkit-transform: scale(1.1);\r\n  transform: scale(1.1);\r\n}\r\n\r\n// avatar and banner\r\n.btn-save {\r\n  padding: 0.5rem 1rem;\r\n  border-radius: 50px;\r\n  background-color: var(--brand-color);\r\n  color: var(--dark-0);\r\n\r\n  &:hover,\r\n  &:disabled {\r\n    opacity: 0.8;\r\n  }\r\n}\r\n\r\n.btn-close {\r\n  display: block;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.bg-mask {\r\n  position: absolute;\r\n  top: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.banner-cancel {\r\n  filter: brightness(0) saturate(100%) invert(100%) sepia(99%) saturate(14%) hue-rotate(213deg) brightness(105%) contrast(100%);\r\n}\r\n\r\n.avatar-container {\r\n  position: absolute;\r\n  bottom: -70px;\r\n  left: 1rem;\r\n  z-index: 1;\r\n}\r\n\r\n.avatar-image-container {\r\n  position: relative;\r\n}\r\n\r\n.avatar-image-label {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  display: block;\r\n  width: 24px;\r\n  height: 24px;\r\n  cursor: pointer;\r\n  background-image: url(../assets/icon/modal-changephoto.svg);\r\n  background-repeat: no-repeat;\r\n  z-index: 1;\r\n}\r\n\r\n.avatar-thumbnail {\r\n  width: 140px;\r\n  height: 140px;\r\n  border: 4px solid var(--dark-0);\r\n  border-radius: 50%;\r\n  background-color: #fff;\r\n}\r\n\r\n.avatar-mask {\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  border-radius: 50%;\r\n}\r\n\r\n.banner-image-container {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 188px;\r\n}\r\n\r\n.banner-btn-control {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  display: flex;\r\n  z-index: 1;\r\n}\r\n\r\n.banner-image-label {\r\n  display: block;\r\n  width: 24px;\r\n  height: 24px;\r\n  cursor: pointer;\r\n  background-image: url(../assets/icon/modal-changephoto.svg);\r\n  background-repeat: no-repeat;\r\n}\r\n\r\n.banner-img-thumbnail {\r\n  height: 188px;\r\n  object-fit: cover;\r\n}\r\n\r\n.banner-mask {\r\n  background-color: rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.form-control-file {\r\n  display: none;\r\n}\r\n\r\n// input start\r\n.input-group {\r\n  position: relative;\r\n  width: 100%;\r\n\r\n  &:first-child {\r\n    margin-bottom: 2rem;\r\n  }\r\n}\r\n\r\ninput,\r\ntextarea {\r\n  width: 100%;\r\n  height: 54px;\r\n  padding: 1.5rem 1rem 0 1rem;\r\n  background-color: #F5F8FA;\r\n  color: var(--dark-100);\r\n  border: none;\r\n  border-bottom: 2px solid var(--message-primary);\r\n  font-size: 16px;\r\n\r\n  &::placeholder {\r\n    font-size: 1rem;\r\n    color: var(--dark-60);\r\n  }\r\n\r\n  &:hover,\r\n  &:focus {\r\n    border-bottom: 2px solid var(--info);\r\n  }\r\n\r\n  &:disabled {\r\n    border-bottom: 2px solid var(--dark-50);\r\n  }\r\n\r\n  &.error {\r\n    border-bottom: 2px solid var(--error);\r\n  }\r\n\r\n  & ~ label {\r\n    position: absolute;\r\n    left: 1rem;\r\n    color: var(--dark-80);\r\n    font-size: 14px;\r\n    line-height: 22px;\r\n  }\r\n}\r\n\r\n.input-hints {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-top: 4px;\r\n  font-size: 12px;\r\n\r\n  & .error {\r\n    color: var(--error);\r\n  }\r\n}\r\n\r\n.self-intro {\r\n  height: 150px;\r\n}\r\n\r\n// input end\r\n@media (max-width: 992px) {\r\n  .modal-container {\r\n    width: 100%;\r\n    max-width: 600px;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModalEditProfile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModalEditProfile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ModalEditProfile.vue?vue&type=template&id=bf89ee08&scoped=true&\"\nimport script from \"./ModalEditProfile.vue?vue&type=script&lang=js&\"\nexport * from \"./ModalEditProfile.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ModalEditProfile.vue?vue&type=style&index=0&id=bf89ee08&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bf89ee08\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"container-twitter\">\r\n    <NavBar />\r\n    <section class=\"center-section\">\r\n      <!-- header -->\r\n      <header class=\"title\">\r\n        <img\r\n          class=\"icon-back\"\r\n          src=\"../assets/icon/tweet-back.svg\"\r\n          alt=\"\"\r\n          @click=\"$router.back()\"\r\n        />\r\n        <div class=\"user-title\">\r\n          <h5 class=\"\">{{ profile.name }}</h5>\r\n          <p class=\"text-muted\">{{ profile.tweetsCounts }} 推文</p>\r\n        </div>\r\n      </header>\r\n\r\n      <Spinner v-if=\"isLoading\"/>\r\n      <main class=\"center-container scrollbar\" v-else>\r\n        <div class=\"profile-img\">\r\n          <!-- avatar -->\r\n          <div class=\"avatar-thumbnail\">\r\n          <img\r\n            class=\"avatarImg\"\r\n            :src=\"profile.avatar | emptyImage\"\r\n            alt=\"avatar-image\"\r\n          />\r\n          </div>\r\n          <!-- banner -->\r\n          <img\r\n            class=\"d-block banner-img-thumbnail\"\r\n            :src=\"profile.cover | emptyCover\"\r\n            alt=\"banner-image\"\r\n          />\r\n        </div>\r\n        <div class=\"profile-detail px-4\">\r\n          <!-- button -->\r\n          <div class=\"button-group my-3\">\r\n            <button\r\n              class=\"btn-edit\"\r\n              v-if=\"currentUser.id === profile.id\"\r\n              @click.stop.prevent=\"isEditing = true\"\r\n            >\r\n              編輯個人資料\r\n            </button>\r\n            <div class=\"btn-follow\" v-else>\r\n              <button class=\"btn-direct-message p-2\">\r\n                <img\r\n                  src=\"../assets/icon/direct-message.svg\"\r\n                  alt=\"direct-message\"\r\n                />\r\n              </button>\r\n              <button class=\"btn-notification\">\r\n                <img src=\"../assets/icon/add-notify.svg\" alt=\"get-notify\" />\r\n              </button>\r\n              <button\r\n                class=\"btn toggle-follow\"\r\n                v-if=\"!profile.isFollowing\"\r\n                @click.stop.prevent=\"addFollowing(profile.id)\"\r\n              >\r\n                跟隨\r\n              </button>\r\n              <button\r\n                class=\"btn toggle-follow following\"\r\n                v-else\r\n                @click.stop.prevent=\"deleteFollowing(profile.id)\"\r\n              >\r\n                正在跟隨\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <!-- user info -->\r\n          <h5>{{ profile.name }}</h5>\r\n          <span class=\"text-muted mb-1\">@{{ profile.account }}</span>\r\n          <p>{{ profile.introduction }}</p>\r\n          <div class=\"follow-status\">\r\n            <span class=\"following-text\"\r\n              >{{ profile.followingsCounts }}個\r\n              <router-link\r\n                :to=\"{ name: 'user-following', params: { id: profile.id } }\"\r\n              >\r\n                <span class=\"text-light\">跟隨中</span>\r\n              </router-link>\r\n            </span>\r\n            <span class=\"follower\"\r\n              >{{ profile.followersCounts }}位\r\n              <router-link\r\n                :to=\"{ name: 'user-follower', params: { id: profile.id } }\"\r\n              >\r\n                <span class=\"text-light\">跟隨者</span>\r\n              </router-link>\r\n            </span>\r\n          </div>\r\n        </div>\r\n        <!-- nested routes -->\r\n        <router-view />\r\n      </main>\r\n      <ModalEditProfile\r\n        v-show=\"isEditing\"\r\n        :initial-profile=\"profile\"\r\n        @close=\"handleModalClose\"\r\n      />\r\n    </section>\r\n    <TweetPopularUser />\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n.title {\r\n  position: relative;;\r\n  display: flex;\r\n  align-items: center;\r\n  width: 100%;\r\n  height: 75px;\r\n}\r\n\r\n.icon-back {\r\n  width: 24px;\r\n  height: 24px;\r\n  cursor: pointer;\r\n  margin: 0 19px 0 28px;\r\n}\r\n\r\n.btn-edit {\r\n  width: 128px;\r\n  height: 40px;\r\n  padding: 8px 16px;\r\n  border: 1px solid var(--brand-color);\r\n  border-radius: 50px;\r\n  color: var(--brand-color);\r\n\r\n  &:hover {\r\n    color: var(--dark-0);\r\n    background-color: var(--brand-color);\r\n  }\r\n}\r\n\r\n.btn-follow {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.btn-direct-message,\r\n.btn-notification {\r\n  width: 40px;\r\n  height: 40px;\r\n  margin-right: 16px;\r\n  border: 1px solid var(--brand-color);\r\n  border-radius: 50%;\r\n}\r\n\r\n.text-muted {\r\n  font-size: 14px;\r\n  color: var(--secondary);\r\n}\r\n\r\n.text-light {\r\n  font-size: 16px;\r\n  color: var(--secondary);\r\n}\r\n\r\n.profile-img {\r\n  position: relative;\r\n}\r\n\r\n.avatar-thumbnail{\r\n  position: absolute;\r\n  left: 1rem;\r\n  bottom: -70px;\r\n  width: 140px;\r\n  height: 140px;\r\n  border: 4px solid var(--dark-0);\r\n  border-radius: 50%;\r\n  background-color: var(--dark-0);\r\n}\r\n\r\n.banner-img-thumbnail {\r\n  max-height: 200px;\r\n  object-fit: cover;\r\n  object-position: center center;\r\n}\r\n\r\n.profile-detail {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.button-group {\r\n  align-self: end;\r\n  display: flex;\r\n}\r\n\r\n.follow-status {\r\n  margin: 0.5rem 0 30px 0;\r\n}\r\n\r\n.following-text {\r\n  margin-right: 1.25rem;\r\n}\r\n\r\n@media (max-width: 992px) {\r\n  .btn-direct-message,\r\n    .btn-notification {\r\n      width: 32px;\r\n      height: 32px;\r\n      margin-right: 8px;\r\n      border: 1px solid var(--brand-color);\r\n      border-radius: 50%;\r\n      & > img{\r\n        width: 16px;\r\n        height: 14px;\r\n      }\r\n    }\r\n\r\n  .avatar-img-thumbnail {\r\n    left: 1.5rem;\r\n    width: 80px;\r\n    height: 80px;\r\n    bottom: -40px;\r\n  }\r\n}\r\n</style>\r\n\r\n<script>\r\nimport NavBar from '../components/NavBar.vue'\r\nimport TweetPopularUser from '../components/TweetPopularUser.vue'\r\nimport ModalEditProfile from '../components/ModalEditProfile.vue'\r\nimport usersAPI from '../apis/users'\r\nimport followshipAPI from '../apis/followship'\r\nimport { Toast } from '../utils/helpers'\r\nimport { mapState, mapActions } from 'vuex'\r\nimport { emptyImageFilter } from '../utils/mixin'\r\nimport Spinner from '../components/Spinner1.vue'\r\n\r\nexport default {\r\n  name: 'UserProfile',\r\n  mixins: [emptyImageFilter],\r\n  data () {\r\n    return {\r\n      profile: {\r\n        id: -1,\r\n        account: '',\r\n        name: '',\r\n        email: '',\r\n        introduction: '',\r\n        avatar: null,\r\n        cover: null,\r\n        tweetsCounts: 0,\r\n        followingsCounts: 0,\r\n        followersCounts: 0,\r\n        isFollowing: false\r\n      },\r\n      isEditing: false,\r\n      isLoading: true\r\n    }\r\n  },\r\n  components: {\r\n    NavBar,\r\n    TweetPopularUser,\r\n    ModalEditProfile,\r\n    Spinner\r\n  },\r\n  methods: {\r\n    ...mapActions(['updatePage']),\r\n    async fetchUserProfile (userId) {\r\n      try {\r\n        // get profile\r\n        const { data } = await usersAPI.getProfile({ userId })\r\n        if (data.status !== 'success') {\r\n          throw new Error(data.message)\r\n        }\r\n\r\n        this.profile = data\r\n        delete this.profile.status\r\n        delete this.profile.message\r\n\r\n        // if introduction is null\r\n        this.profile = {\r\n          ...this.profile,\r\n          introduction: this.profile.introduction\r\n            ? this.profile.introduction\r\n            : ''\r\n        }\r\n        this.isLoading = false\r\n      } catch (error) {\r\n        this.isLoading = false\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: '無法取得使用者資料，請稍後再試'\r\n        })\r\n      }\r\n    },\r\n    async addFollowing (userId) {\r\n      try {\r\n        const { data } = await followshipAPI.addFollow({ id: userId })\r\n        if (data.status !== 'success') {\r\n          throw new Error(data.message)\r\n        }\r\n        this.profile.isFollowing = true\r\n        this.profile.followersCounts += 1\r\n        Toast.fire({\r\n          icon: 'success',\r\n          title: '追蹤成功'\r\n        })\r\n        this.updatePage(true)\r\n      } catch (error) {\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: '追蹤失敗，請稍後再試'\r\n        })\r\n      }\r\n    },\r\n    async deleteFollowing (userId) {\r\n      try {\r\n        const { data } = await followshipAPI.deleteFollow({ id: userId })\r\n        if (data.status !== 'success') {\r\n          throw new Error(data.message)\r\n        }\r\n        this.profile.isFollowing = false\r\n        this.profile.followersCounts -= 1\r\n        Toast.fire({\r\n          icon: 'success',\r\n          title: '已取消追蹤'\r\n        })\r\n        this.updatePage(true)\r\n      } catch (error) {\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: '無法取消追蹤，請稍後再試'\r\n        })\r\n      }\r\n    },\r\n    handleModalClose () {\r\n      this.isEditing = false\r\n    }\r\n  },\r\n  created () {\r\n    const { id: userId } = this.$route.params\r\n    this.fetchUserProfile(userId)\r\n  },\r\n  beforeRouteUpdate (to, from, next) {\r\n    const { id } = to.params\r\n    this.fetchUserProfile(id)\r\n    next()\r\n  },\r\n  computed: {\r\n    ...mapState(['currentUser']),\r\n    ...mapState({ updatePageNow: 'updatePageNow' })\r\n  },\r\n  watch: {\r\n    updatePageNow () {\r\n      if (this.updatePageNow) {\r\n        const { id: userId } = this.$route.params\r\n        this.fetchUserProfile(userId)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserProfile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserProfile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserProfile.vue?vue&type=template&id=06eda298&scoped=true&\"\nimport script from \"./UserProfile.vue?vue&type=script&lang=js&\"\nexport * from \"./UserProfile.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserProfile.vue?vue&type=style&index=0&id=06eda298&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"06eda298\",\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/tweet-back.6008f2d3.svg\";","module.exports = __webpack_public_path__ + \"img/direct-message.289a5ba1.svg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModalEditProfile.vue?vue&type=style&index=0&id=bf89ee08&prod&lang=scss&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserProfile.vue?vue&type=style&index=0&id=06eda298&prod&lang=scss&scoped=true&\""],"sourceRoot":""}