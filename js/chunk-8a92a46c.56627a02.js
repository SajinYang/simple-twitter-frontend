(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8a92a46c"],{"019b":function(e,s,t){},"0777":function(e,s,t){"use strict";t("019b")},"3e15":function(e,s,t){"use strict";var i=function(){var e=this,s=e._self._c;return s("form",{class:["form-group",{scrollable:"setting"===e.currentPage},{scroll:"setting"===e.currentPage}],attrs:{action:"#"},on:{submit:function(s){return s.stopPropagation(),s.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.account,expression:"user.account"}],class:{error:e.user.account.length>10},attrs:{type:"text",name:"account",id:"account",placeholder:"請輸入帳號",maxlength:"100",autocomplete:"username",required:""},domProps:{value:e.user.account},on:{input:function(s){s.target.composing||e.$set(e.user,"account",s.target.value)}}}),s("label",{attrs:{for:"account"}},[e._v("帳號")]),s("div",{staticClass:"input-hints"},[s("span",{staticClass:"error",style:{visibility:e.user.account.length>10?"visible":"hidden"}},[e._v(" 字數超出上限！ ")]),e.user.account.length?s("span",{class:{error:e.user.account.length>10}},[e._v(" "+e._s(e.user.account.length)+"/10 ")]):e._e()])]),s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.name,expression:"user.name"}],class:{error:e.user.name.length>50},attrs:{type:"text",name:"name",id:"name",placeholder:"請輸入使用者名稱",maxlength:"100",autocomplete:"name",required:""},domProps:{value:e.user.name},on:{input:function(s){s.target.composing||e.$set(e.user,"name",s.target.value)}}}),s("label",{attrs:{for:"name"}},[e._v("名稱")]),s("div",{staticClass:"input-hints"},[s("span",{staticClass:"error",style:{visibility:e.user.name.length>50?"visible":"hidden"}},[e._v(" 字數超出上限！ ")]),e.user.name.length?s("span",{class:{error:e.user.name.length>50}},[e._v(" "+e._s(e.user.name.length)+"/50 ")]):e._e()])]),s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.user.email,expression:"user.email",modifiers:{lazy:!0}}],attrs:{type:"email",name:"email",id:"email",placeholder:"請輸入Email",autocomplete:"email",required:""},domProps:{value:e.user.email},on:{change:[function(s){return e.$set(e.user,"email",s.target.value)},e.checkEmailFormat]}}),s("label",{attrs:{for:"email"}},[e._v("Email")])]),s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.user.password,expression:"user.password",modifiers:{lazy:!0}}],attrs:{type:"password",name:"password",id:"password",placeholder:"請設定密碼",maxlength:"100",autocomplete:"new-password",required:"signup"===e.currentPage},domProps:{value:e.user.password},on:{change:function(s){return e.$set(e.user,"password",s.target.value)}}}),s("label",{attrs:{for:"password"}},[e._v("密碼")])]),s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.user.checkPassword,expression:"user.checkPassword",modifiers:{lazy:!0}}],attrs:{type:"password",name:"password",id:"passwordCheck",placeholder:"請再次設定密碼",maxlength:"100",required:"signup"===e.currentPage},domProps:{value:e.user.checkPassword},on:{change:function(s){return e.$set(e.user,"checkPassword",s.target.value)}}}),s("label",{attrs:{for:"checkPassword"}},[e._v("密碼確認")])]),"setting"===e.currentPage?s("button",{staticClass:"btn-setting",attrs:{type:"submit",disabled:e.isProcessing}},[e._v(" "+e._s(e.isProcessing?"處理中":"儲存")+" ")]):e._e(),"signup"===e.currentPage?s("button",{staticClass:"btn-primary",attrs:{type:"submit",disabled:e.isProcessing}},[e._v(" "+e._s(e.isProcessing?"處理中":"註冊")+" ")]):e._e(),"signup"===e.currentPage?s("router-link",{staticClass:"btn-link",attrs:{to:{name:"sign-in"}}},[e._v(" 取消 ")]):e._e()],1)},a=[],r=t("2fa3"),n={props:{currentPage:{type:String,required:!0},initialUser:{type:Object,default:()=>({account:"",name:"",email:"",password:"",checkPassword:""})},isProcessing:{type:Boolean,default:!1}},data(){return{user:{account:"",name:"",email:"",password:"",checkPassword:""},validResult:!1}},methods:{fetchInitialUser(){this.user={...this.user,...this.initialUser}},checkEmailFormat(){const e=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;return e.test(this.user.email)},handleSubmit(e){if("signup"===this.currentPage){if(!this.user.account||!this.user.name||!this.user.email||!this.user.password||!this.user.checkPassword)return r["a"].fire({icon:"warning",title:"請確認已填寫所有欄位"}),this.validResult=!1,void this.$emit("after-submit",{validResult:this.validResult,user:{}});if(this.user.account.trim().length>10||this.user.name.trim().length>50)return r["a"].fire({icon:"warning",title:"字數超出上限，請重新填寫"}),this.validResult=!1,void this.$emit("after-submit",{validResult:this.validResult,user:{}});if(this.user.password!==this.user.checkPassword)return r["a"].fire({icon:"warning",title:"兩次輸入的密碼不同"}),this.user.checkPassword="",this.validResult=!1,void this.$emit("after-submit",{validResult:this.validResult,user:{}});this.validResult=!0,this.$emit("after-submit",{validResult:this.validResult,user:this.user})}if("setting"===this.currentPage){if(!this.user.account||!this.user.name||!this.user.email)return r["a"].fire({icon:"warning",title:"請確認已填寫所有欄位"}),this.validResult=!1,void this.$emit("after-submit",{validResult:this.validResult,user:{}});if(this.user.account.trim().length>10||this.user.name.trim().length>50)return r["a"].fire({icon:"warning",title:"字數超出上限，請重新填寫"}),this.validResult=!1,void this.$emit("after-submit",{validResult:this.validResult,user:{}});if(this.user.password!==this.user.checkPassword)return r["a"].fire({icon:"warning",title:"兩次輸入的密碼不同"}),this.user.checkPassword="",this.validResult=!1,void this.$emit("after-submit",{validResult:this.validResult,user:{}});this.validResult=!0,this.$emit("after-submit",{validResult:this.validResult,user:this.user})}}},created(){this.fetchInitialUser()}},u=n,l=(t("4115"),t("2877")),o=Object(l["a"])(u,i,a,!1,null,"2f9a66a9",null);s["a"]=o.exports},4115:function(e,s,t){"use strict";t("ca3f")},"5c9c":function(e,s,t){"use strict";t.r(s);var i=function(){var e=this,s=e._self._c;return s("main",{staticClass:"container-wrap"},[s("div",{staticClass:"container-lg pt-6 pb-4 px-4 scrollbar"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"logo"},[s("router-link",{attrs:{to:"/tweets"}},[s("img",{attrs:{src:t("7107"),alt:""}})])],1)]),e._m(0),s("div",{staticClass:"col-12"},[s("FormAccount",{attrs:{"current-page":"signup","is-processing":e.isProcessing},on:{"after-submit":e.handleAfterSubmit}})],1)])])])},a=[function(){var e=this,s=e._self._c;return s("div",{staticClass:"col-12"},[s("h3",[e._v("建立你的帳號")])])}],r=(t("d9e2"),t("3e15")),n=t("4cce"),u=t("2fa3"),l={components:{FormAccount:r["a"]},data(){return{isProcessing:!1}},methods:{async handleAfterSubmit(e){try{const{validResult:s,user:t}=e;if(!s)return;this.isProcessing=!0;const{data:i}=await n["a"].signUp({...t});if("success"!==i.status)throw new Error(i.message);u["a"].fire({icon:"success",title:"註冊成功，請登入"}),this.$router.push({name:"sign-in"})}catch(s){this.isProcessing=!1;const e=s.response.data.message;u["a"].fire({icon:"warning",title:e})}}}},o=l,c=(t("0777"),t("2877")),d=Object(c["a"])(o,i,a,!1,null,"e82caf76",null);s["default"]=d.exports},ca3f:function(e,s,t){}}]);
//# sourceMappingURL=chunk-8a92a46c.56627a02.js.map