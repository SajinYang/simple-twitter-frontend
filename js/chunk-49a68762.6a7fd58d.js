(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-49a68762"],{"035c":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e._self._c;return t("div",[e.isLoading?t("Spinner"):[t("nav",[t("ul",{staticClass:"tabs-group"},e._l(e.tabs,(function(s){return t("li",{key:s.id,class:["nav-tab",{active:s.name===e.currentRoute}]},[t("router-link",{key:s.id,staticClass:"nav-link",attrs:{"aria-current":"page",to:{name:s.name}}},[e._v(" "+e._s(s.title)+" ")])],1)})),0)]),e._l(e.userLikes,(function(i){return t("section",{key:i.id,staticClass:"tweet-popular-section"},[t("div",{staticClass:"tweet-popular-container"},[t("router-link",{staticClass:"tweet",attrs:{to:{name:"tweet",params:{id:i.id}}}},[t("router-link",{staticClass:"avatar",attrs:{to:{name:"user",params:{id:i.User.id}}}},[t("img",{staticClass:"avatarImg",attrs:{src:e._f("emptyImage")(i.User.avatar),alt:""}})]),t("div",{staticClass:"tweet-info"},[t("div",{staticClass:"tweet-user"},[t("router-link",{staticClass:"tweet-user name",attrs:{to:{name:"user",params:{id:i.User.id}}}},[e._v(" "+e._s(i.User.name)+" ")]),t("router-link",{staticClass:"tweet-user account",attrs:{to:{name:"user",params:{id:i.User.id}}}},[e._v(" @"+e._s(i.User.account)+" ・ "+e._s(e._f("fromNow")(i.createdAt)))])],1),t("p",{staticClass:"tweet-content"},[e._v(" "+e._s(i.description)+" ")]),t("div",{staticClass:"tweet-icon-container"},[t("div",{staticClass:"tweet-reply"},[t("router-link",{staticClass:"cursor-default",attrs:{to:""}},[t("ModalTweetReply",{staticClass:"tweet-icon-reply",attrs:{initialTweet:i},on:{"after-create-reply":function(t){return e.afterCreateReply(i.id)}}})],1),t("span",{staticClass:"tweet-icon-number"},[e._v(e._s(i.repliedCounts))])],1),t("div",{staticClass:"tweet-like"},[i.isBeingLiked?t("img",{staticClass:"tweet-icon-like",attrs:{src:s("cb58"),alt:""},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.deleteLike(i.id)}}}):e._e(),t("span",{staticClass:"tweet-icon-number"},[e._v(e._s(i.likesCounts))])])])])],1)],1)])})),e.userLikes.length<1?t("h5",{staticClass:"m-6"},[e._v(" You don’t have any likes yet. "),t("p",{staticClass:"text-muted"},[e._v("Tap the heart on any Tweet to show it some love. When you do, it’ll show up here.")])]):e._e()]],2)},a=[],r=(s("d9e2"),s("ac0d")),n=s("4cce"),o=s("6783"),c=s("2fa3"),l=s("6699"),u=s("b222"),d={mixins:[r["c"],r["b"]],components:{ModalTweetReply:l["a"],Spinner:u["a"]},data(){return{userLikes:[],isLoading:!0,currentRoute:this.$router.currentRoute.name}},methods:{fetchTabs(e){this.tabs=[{id:1,title:"推文",name:"user"},{id:2,title:"回覆",name:"user-replies"},{id:3,title:"喜歡的內容",name:"user-likes"}]},async fetchUserLiked(e){try{const t=await n["a"].getLikes({userId:e});if(200!==t.status)throw new Error(t.message);const{data:s}=t;this.userLikes=s.map(e=>({id:e.TweetId,description:e.description,createdAt:e.createdAt,likesCounts:e.likesCounts,repliedCounts:e.repliedCounts,isBeingLiked:!0,UserId:e.userOflikedTweet,User:{id:e.userOflikedTweet,name:e.userNameOflikedTweet,account:e.userAccountOflikedTweet,avatar:e.userAvatarOflikedTweet}})),this.isLoading=!1}catch(t){this.isLoading=!1,c["a"].fire({icon:"error",title:"無法取得使用者所有tweets，請稍後再試"})}},async deleteLike(e){try{const{data:t}=await o["a"].deleteLike({tweetId:e});if("success"!==t.status)throw new Error(t.message);this.userLikes.map(t=>t.id===e?{...t,isBeingLiked:!1,repliedCounts:t.repliedCounts-1}:t),this.userLikes=this.userLikes.filter(t=>t.id!==e)}catch(t){c["a"].fire({icon:"error",title:"無法按喜歡，請稍後再試"})}},afterCreateReply(e){this.userLikes.map(t=>t.id===e?{...t,repliedCounts:t.repliedCounts+1}:t)}},created(){const{id:e}=this.$route.params;this.fetchUserLiked(e),this.fetchTabs()},beforeRouteUpdate(e,t,s){const{id:i}=e.params;this.fetchUserLiked(i),this.fetchTabs(),s()}},p=d,k=(s("445e"),s("2877")),w=Object(k["a"])(p,i,a,!1,null,"3935b67e",null);t["default"]=w.exports},"445e":function(e,t,s){"use strict";s("8b52")},"8b52":function(e,t,s){}}]);
//# sourceMappingURL=chunk-49a68762.6a7fd58d.js.map