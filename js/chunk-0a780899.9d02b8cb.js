(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a780899"],{"11f5":function(t,o,s){},"395b":function(t,o,s){"use strict";var l=function(){var t=this,o=t._self._c;return o("section",{staticClass:"follow-section"},["follower"===t.followStatus?o("div",{staticClass:"follow-container"},t._l(t.followers,(function(s){return o("div",{key:s.followerId,staticClass:"follow"},[o("router-link",{staticClass:"avatar",attrs:{to:{name:"user",params:{id:s.followerId}}}},[o("img",{staticClass:"avatarImg",attrs:{src:t._f("emptyImage")(s.userAvatarOfFollower),alt:""}})]),o("div",{staticClass:"follow-info"},[o("router-link",{staticClass:"follow-user",attrs:{to:{name:"user",params:{id:s.followerId}}}},[o("span",{staticClass:"follow-user name"},[t._v(t._s(s.userNameOfFollower))])]),o("p",{staticClass:"follow-content"},[t._v(" "+t._s(s.userInrtoductionOfFollower)+" ")])],1),o("div",{staticClass:"popular-user-btn"},[s.isFollowing?o("button",{staticClass:"btn toggle-follow following",attrs:{disabled:t.isProcessing},on:{click:function(o){return o.stopPropagation(),o.preventDefault(),t.deleteFollowing(s.followerId)}}},[t._v(" 正在跟隨 ")]):o("button",{staticClass:"btn toggle-follow",attrs:{disabled:t.isProcessing},on:{click:function(o){return o.stopPropagation(),o.preventDefault(),t.addFollowing(s.followerId)}}},[t._v(" 跟隨 ")])])],1)})),0):t._e(),"following"===t.followStatus?o("div",{staticClass:"follow-container"},t._l(t.followings,(function(s){return o("div",{key:s.followingId,staticClass:"follow"},[o("router-link",{staticClass:"avatar",attrs:{to:{name:"user",params:{id:s.followingId}}}},[o("img",{staticClass:"avatarImg",attrs:{src:t._f("emptyImage")(s.userAvatarOfFollowing),alt:""}})]),o("div",{staticClass:"follow-info"},[o("div",{staticClass:"follow-user"},[o("router-link",{staticClass:"follow-user name",attrs:{to:{name:"user",params:{id:s.followingId}}}},[t._v(t._s(s.userNameOfFollowing))])],1),o("p",{staticClass:"follow-content"},[t._v(" "+t._s(s.userInrtoductionOfFollowing)+" ")])]),o("div",{staticClass:"popular-user-btn"},[s.isFollowing?o("button",{staticClass:"btn toggle-follow following",attrs:{disabled:t.isProcessing},on:{click:function(o){return o.stopPropagation(),o.preventDefault(),t.deleteFollowing(s.followingId)}}},[t._v(" 正在跟隨 ")]):o("button",{staticClass:"btn toggle-follow",attrs:{disabled:t.isProcessing},on:{click:function(o){return o.stopPropagation(),o.preventDefault(),t.addFollowing(s.followingId)}}},[t._v(" 跟隨 ")])])],1)})),0):t._e()])},a=[],i=(s("d9e2"),s("b025")),e=s("ac0d"),n=s("2f62"),r=s("2fa3"),c={props:{followStatus:{type:String,default:"follower",required:!0},followers:{type:Array,require:!0},followings:{type:Array,require:!0}},data(){return{isProcessing:!1}},mixins:[e["b"]],methods:{async addFollowing(t){try{this.isProcessing=!0;const{data:o}=await i["a"].addFollow({id:t});if("success"!==o.status)throw new Error(o.message);"following"===this.followStatus&&(this.followings=this.followings.map(o=>o.followingId!==t?o:{...o,isFollowing:!0})),"follower"===this.followStatus&&(this.followers=this.followers.map(o=>o.followerId!==t?o:{...o,isFollowing:!0})),r["a"].fire({icon:"success",title:"追蹤成功"}),this.isProcessing=!1}catch(o){this.isProcessing=!1,r["a"].fire({icon:"error",title:"無法追蹤成功，請稍後再試"})}},async deleteFollowing(t){try{this.isProcessing=!0;const{data:o}=await i["a"].deleteFollow({id:t});if("success"!==o.status)throw new Error(o.message);"following"===this.followStatus&&(this.followings=this.followings.map(o=>o.followingId!==t?o:{...o,isFollowing:!1})),"follower"===this.followStatus&&(this.followers=this.followers.map(o=>o.followerId!==t?o:{...o,isFollowing:!1})),r["a"].fire({icon:"success",title:"已取消追蹤"}),this.isProcessing=!1}catch(o){this.isProcessing=!1,r["a"].fire({icon:"error",title:"無法追蹤成功，請稍後再試"})}}},computed:{...Object(n["c"])(["currentUser"])}},f=c,w=(s("5088"),s("2877")),u=Object(w["a"])(f,l,a,!1,null,"888870da",null);o["a"]=u.exports},"4ba8":function(t,o,s){t.exports=s.p+"img/tweet-back.6008f2d3.svg"},5088:function(t,o,s){"use strict";s("a20c")},9154:function(t,o,s){"use strict";s("11f5")},a20c:function(t,o,s){},cc95:function(t,o,s){"use strict";s.r(o);var l=function(){var t=this,o=t._self._c;return o("div",{staticClass:"container-twitter"},[o("NavBar"),o("section",{staticClass:"center-section"},[o("header",{staticClass:"follow-header"},[o("div",{staticClass:"header-top"},[o("img",{staticClass:"icon-back",attrs:{src:s("4ba8"),alt:""},on:{click:function(o){return t.$router.back()}}}),o("div",{staticClass:"title-container"},[o("h5",{staticClass:"title"},[t._v(t._s(t.profile.name))]),o("span",{staticClass:"subtitle"},[t._v(t._s(t.profile.tweetsCounts)+" 推文")])])]),o("div",{staticClass:"navtabs"},[o("button",{staticClass:"button-navtabs",class:{active:"follower"===t.followStatus},on:{click:function(o){return o.stopPropagation(),o.preventDefault(),t.toggleFollowStatus("follower")}}},[o("span",{staticClass:"subtitle",class:{active:"follower"===t.followStatus}},[t._v("追隨者")])]),o("button",{staticClass:"button-navtabs",class:{active:"following"===t.followStatus},on:{click:function(o){return o.stopPropagation(),o.preventDefault(),t.toggleFollowStatus("following")}}},[o("span",{staticClass:"subtitle",class:{active:"following"===t.followStatus}},[t._v("正在追隨")])])])]),t.isLoading?o("Spinner"):o("div",{staticClass:"follow-center-container scrollbar"},[o("TweetFollow",{attrs:{followStatus:t.followStatus,followers:t.followers,followings:t.followings}})],1)],1),o("TweetPopularUser")],1)},a=[],i=(s("d9e2"),s("d000")),e=s("6e47"),n=s("395b"),r=s("4cce"),c=s("2fa3"),f=s("b222"),w={components:{NavBar:i["a"],TweetPopularUser:e["a"],TweetFollow:n["a"],Spinner:f["a"]},data(){return{followStatus:"following",followers:[],followings:[],profile:{id:-1,account:"",name:"",tweetsCounts:0},isLoading:!0}},created(){const{id:t}=this.$route.params;this.fetchfollowings(t),this.fetchfollowers(t),this.fetchUserProfile(t)},beforeRouteUpdate(t,o,s){const{id:l}=t.params;this.fetchfollowings(l),this.fetchfollowers(l),this.fetchUserProfile(l),s()},methods:{toggleFollowStatus(t){this.followStatus=t},async fetchfollowings(t){try{const o=await r["a"].getFollowings({userId:t}),s=o.data;this.followings=[...s],this.isLoading=!1}catch(o){this.isLoading=!1,c["a"].fire({icon:"error",title:"無法取得追蹤者資料，請稍後再試"})}},async fetchfollowers(t){try{const o=await r["a"].getFollowers({userId:t}),s=o.data;this.followers=[...s],this.isLoading=!1}catch(o){this.isLoading=!1,c["a"].fire({icon:"error",title:"無法取得追蹤者資料，請稍後再試"})}},async fetchUserProfile(t){const{data:o}=await r["a"].getProfile({userId:t});if("success"!==o.status)throw new Error(o.message);const{id:s,account:l,name:a,tweetsCounts:i}=o;this.profile={id:s,account:l,name:a,tweetsCounts:i}}}},u=w,g=(s("9154"),s("2877")),d=Object(g["a"])(u,l,a,!1,null,"e10402e0",null);o["default"]=d.exports}}]);
//# sourceMappingURL=chunk-0a780899.9d02b8cb.js.map